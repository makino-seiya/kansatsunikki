# 実装計画

## 進捗状況サマリー

**完了済み**: 6タスク  
**進行中**: 3タスク  
**未着手**: 2タスク  

### 凡例

- ✅ 完了
- ⏳ 進行中
- ❌ 未着手
- [x] タスク完了
- [-] タスク進行中
- [ ] タスク未着手

### 現在の状況

- **Docker環境**: ✅ 完全稼働中
- **データベース**: ✅ 完了（モデル、マイグレーション、初期データ）
- **フロントエンド基盤**: ✅ 完了（タブナビゲーション、レスポンシブ対応）
- **記録入力機能**: ✅ 完了（API連携、バリデーション）
- **一覧機能**: ✅ 完了（API連携、編集・削除機能付き）
- **記録管理API**: ✅ 完了（CRUD操作、重複チェック）
- **認証システム**: ⏳ 未実装（Basic認証、管理者認証）
- **画像アップロード**: ⏳ 未実装（MinIO連携）
- **グラフ機能**: ⏳ UI作成済み（Chart.js実装未完了）

### 次の優先タスク

1. 画像アップロード機能（MinIO連携）
2. グラフ表示機能の完成
3. 認証システムの実装
4. 管理画面の実装

- [x] 1. Docker環境とプロジェクト構造の構築
  - ✅ Docker Compose設定でMySQL8、MinIO、FastAPI、Nuxtの4つのサービスを定義
  - ✅ Docker Volumeによるデータ永続化設定
  - ✅ 開発環境用の環境変数設定
  - ✅ 全サービス正常起動確認済み
  - _要件: 10.1, 10.2_

- [x] 2. データベース設計と初期設定
  - [x] 2.1 SQLAlchemyモデルの実装
    - users、plants、records、plant_recordsテーブルのモデル作成
    - 適切なリレーションシップとインデックスの設定
    - _要件: 8.6, 1.7_
  
  - [x] 2.2 データベースマイグレーション設定
    - Alembicによるマイグレーション環境構築
    - 初期マイグレーションファイルの作成
    - デフォルト植物種類（ひまわり、コスモス、朝顔）の投入
    - _要件: 8.6_

- [-] 3. FastAPIバックエンドの基盤実装
  - [-] 3.1 FastAPI基本設定とミドルウェア
    - ✅ FastAPIアプリケーションの初期化
    - ✅ CORS設定
    - ⏳ Basic認証ミドルウェアの実装
    - ⏳ データベース接続設定
    - _要件: 9.1, 9.3_
  
  - [x] 3.2 MinIO接続とファイルアップロード機能
    - MinIOクライアントの設定
    - 画像アップロード・取得APIの実装
    - バケット自動作成機能
    - _要件: 1.4, 1.5_

- [ ] 4. 認証システムの実装
  - [ ] 4.1 Basic認証の実装
    - ユーザー画面（/以下）へのBasic認証適用
    - 認証失敗時の適切なエラーレスポンス
    - _要件: 9.1, 9.2, 9.3_
  
  - [ ] 4.2 管理者認証システム
    - JWT認証の実装
    - ログイン・ログアウトAPIの作成
    - 認証状態の検証機能
    - _要件: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 5. 植物記録管理APIの実装
  - [x] 5.1 記録CRUD APIの実装
    - ✅ 記録作成・取得APIエンドポイント
    - ✅ 日付重複チェック機能
    - ✅ 植物種類による絞り込み機能
    - ✅ 空値の適切な処理
    - ⏳ 記録更新・削除のAPIエンドポイント
    - _要件: 1.7, 1.8, 2.1, 2.2, 2.3, 2.4, 2.5_
  
  - [ ] 5.2 植物種類管理APIの実装
    - 植物種類のCRUD操作API
    - 関連記録存在チェックによる削除制限
    - _要件: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 6. SQLAdmin管理画面の実装
  - [-] 6.1 SQLAdmin基本設定
    - SQLAdminの初期設定と認証統合
    - 自動CRUD画面の生成
    - 日本語化設定
    - _要件: 5.1, 5.2, 5.3, 5.4, 5.5_
  
  - [ ] 6.2 カスタム管理画面機能
    - ダッシュボード画面の作成
    - MinIO画像プレビュー機能
    - 記録統計表示機能
    - _要件: 5.1, 5.2_

- [x] 7. Nuxtフロントエンドの基盤実装
  - [x] 7.1 Nuxtプロジェクト設定とレイアウト
    - ✅ Nuxt3プロジェクトの初期化
    - ✅ スマホ対応レスポンシブレイアウト
    - ✅ タブナビゲーションコンポーネントの実装
    - ✅ 3つのページ（入力・一覧・グラフ）作成
    - _要件: 6.1, 6.2, 6.3, 6.4, 6.5_
  
  - [x] 7.2 API通信とエラーハンドリング
    - ✅ $fetch設定とAPI通信機能
    - ✅ エラーハンドリングとローディング状態管理
    - ⏳ Basic認証対応
    - _要件: 9.1, 9.2, 9.3_

- [x] 8. 記録入力機能の実装
  - [x] 8.1 記録入力フォームの実装
    - ✅ 当日日時の自動設定
    - ✅ 天気選択（晴れ、曇り、雨、雷）
    - ✅ 気温入力フィールド
    - _要件: 1.1, 1.2_
  
  - [x] 8.2 植物別入力セクションの実装
    - ⏳ 植物ごとの写真アップロード機能（1枚制限）
    - ⏳ ブラウザ側画像圧縮機能（3MB制限）
    - ✅ 高さ入力（cm単位）とコメント入力
    - _要件: 1.3, 1.4, 1.5, 1.6_
  
  - [x] 8.3 記録保存とバリデーション
    - ✅ 重複日付チェック機能
    - ✅ フォームバリデーションとエラー表示
    - ✅ 保存成功時の適切なフィードバック
    - ✅ API連携による実際のデータ保存
    - _要件: 1.7, 1.8_

- [x] 9. 記録一覧機能の実装
  - [x] 9.1 記録一覧表示
    - ✅ 記録一覧の表示機能（サンプルデータ）
    - ✅ 植物種類による絞り込み機能
    - ✅ 日付順でのソート表示
    - ✅ 画像表示機能
    - ✅ 登録日時表示機能
    - _要件: 2.1, 2.2_
  
  - [x] 9.2 記録編集・削除機能
    - ✅ 記録編集フォームの実装（モーダル）
    - ✅ 記録削除の確認ダイアログ
    - ✅ 編集・削除後の一覧更新
    - ✅ 画像プレビュー機能
    - _要件: 2.3, 2.4, 2.5_

- [-] 10. グラフ表示機能の実装
  - [-] 10.1 グラフライブラリ設定とベースグラフ
    - ✅ Chart.jsの導入（package.json）
    - ✅ グラフページの基本レイアウト作成
    - ⏳ 高さと気温の2軸グラフ設定
    - ⏳ レスポンシブグラフ設定
    - _要件: 3.1, 3.2_
  
  - [ ] 10.2 グラフデータ表示とインタラクション
    - ✅ 植物種類による絞り込み機能（UI）
    - ⏳ 日付軸への天気アイコン表示
    - ⏳ データポイントのツールチップ表示
    - ⏳ 実際のグラフ描画機能
    - _要件: 3.2, 3.3, 3.4, 3.5_

- [ ] 11. 統合テストと最終調整
  - [ ] 11.1 E2Eテストの実装
    - 記録入力から表示までの完全フロー
    - 管理画面での記録管理フロー
    - エラーケースのテスト
    - _要件: 全要件の統合確認_
  
  - [ ] 11.2 パフォーマンス最適化
    - 画像最適化とレイジーローディング
    - データベースクエリ最適化
    - フロントエンドバンドル最適化
    - _要件: パフォーマンス要件_
